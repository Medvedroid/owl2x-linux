/*
 * Copyright (C) 2014
 * Author: B. Mouritsen <bnmguy@gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/dts-v1/;

/include/ "skeleton.dtsi"

/memreserve/    0x0000000069000000 0x0000000017000000;
/memreserve/    0x000000005d000000 0x000000000c000000;
/memreserve/    0x000000005c400000 0x0000000000c00000;
/memreserve/    0x000000005c3ff000 0x0000000000001000;
/ {
        model = "Actions ATM7029 Boards";
        #address-cells = <1>;
        #size-cells = <1>;
        compatible = "actions,atm7029";
        interrupt-parent = <&gic>;

        aliases {
                serial0 = &uart0;
                serial1 = &uart1;
                serial2 = &uart2;
                serial3 = &uart3;
                serial4 = &uart4;
                serial5 = &uart5;
                i2c0 = &i2c0;
                i2c1 = &i2c1;
                i2c2 = &i2c2;
                spi0 = "/spi@b0200000";
                spi1 = "/spi@b0204000";
                spi2 = "/spi@b0208000";
                spi3 = "/spi@b020c000";
                isp0 = "/isp@b0270000";
                sdboot = "/mmc@b0230000";
                mmc0 = "/mmc@b0230000";
                mmc1 = "/mmc@b0234000";
                mmc2 = "/mmc@b0238000";
        };

        chosen {
                bootargs = "console=ttyS5 earlyprintk";
        };

        memory {
                device_type = "memory";
                reg = <0x0 0x80000000>;
        };

        cpus {
                #size-cells = <0x0>;
                #address-cells = <0x1>;

                cpu@0 {
                        device_type = "cpu";
                        compatible = "arm,cortex-a5";
                        reg = <0x0>;
                        transition-latency = <0xee6c>;
                        cpuvdd-supply = <0x2>;
                };

                cpu@1 {
                        device_type = "cpu";
                        compatible = "arm,cortex-a5";
                        reg = <0x1>;
                };

                cpu@2 {
                        device_type = "cpu";
                        compatible = "arm,cortex-a5";
                        reg = <0x1>;
                };

                cpu@3 {
                        device_type = "cpu";
                        compatible = "arm,cortex-a5";
                        reg = <0x1>;
                };
        };

        gic: interrupt-controller@b0021000 {
                compatible = "arm,cortex-a5-gic";
                interrupt-controller;
                #interrupt-cells = <3>;
                reg = <0xb0021000 0x1000, 0xb0020100 0x100>;
        };

        pmu {
                compatible = "arm,cortex-a5-pmu";
                interrupts = <0x0 0x4 0x4 0x0 0x5 0x4 0x0 0x6 0x4 0x0 0x7 0x4>;
        };

        L2: cache-controller@b0022000 {
                compatible = "arm,pl310-cache";
                reg = <0xb0022000 0x1000>;
                cache-unified;
                cache-level = <2>;
                interrupts = <0x0 0x37 0x4>;
                arm,tag-latency = <0x3 0x3 0x2>;
                arm,data-latency = <0x5 0x3 0x3>;
        };

        uart0: serial@b0160000 {
                compatible = "actions,atm7029-uart", "actions,atm7029-uart-irc";
                reg = <0xb0160000 0x2000>;
                interrupts = <0x0 0x1d 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <3>;
                status = "disabled";
        };

        uart1: serial@b0162000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb0162000 0x2000>;
                interrupts = <0x0 0x1e 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <4>;
                status = "disabled";
        };

        uart2: serial@b0164000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb0164000 0x2000>;
                interrupts = <0x0 0x1f 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <5>;
                status = "okay";
                sdio_uart_supported;
        };

        uart3: serial@b0166000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb0166000 0x2000>;
                interrupts = <0x0 0x20 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <6>;
                actions,enable-dma-rx;
                status = "okay";
        };

        uart4: serial@b0168000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb0168000 0x2000>;
                interrupts = <0x0 0x21 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <7>;
                status = "disabled";
        };

        uart5: serial@b016a000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb016a000 0x2000>;
                interrupts = <0x0 0x22 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <8>;
                status = "disabled";
        };

        uart6: serial@b016c000 {
                compatible = "actions,atm7029-uart";
                reg = <0xb016c000 0x2000>;
                interrupts = <0x0 0x23 0x4>;
                clock-frequency = <48000000>;
                pinctrl-names = "default";
                pinctrl-0 = <9>;
                status = "disabled";
        };

        i2c0: i2c@b0180000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-i2c";
                reg = <0xb0180000 0x4000>;
                interrupts = <0x0 0x19 0x4>;
                i2c_num = <0>;
        };

        i2c1: i2c@b0184000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-i2c";
                reg = <0xb0184000 0x4000>;
                interrupts = <0x0 0x1a 0x4>;
                i2c_num = <1>;
        };

        i2c2: i2c@b0188000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-i2c";
                reg = <0xb0188000 0x4000>;
                interrupts = <0x0 0x1b 0x4>;
                i2c_num = <2>;
        };

        spi0: spi@b0250000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-spi";
                reg = <0xb0250000 0x4000>;
                interrupts = <0x0 0x13 0x4>;
                status = "disabled";
        };

        spi1: spi@b0254000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-spi";
                reg = <0xb0254000 0x4000>;
                interrupts = <0x0 0x14 0x4>;
                status = "okay";

                atc260x: atc260x@00 {
                        reg = <0x0>;
                        spi-max-frequency = <6000000>;
                        spi-cpha = <1>;
                        spi-cpol = <1>;
                        interrupts = <0x0 0x3f 0x4>;
                        interupt-parent = <&gic>
                };
        };

        /include/ "atc260x.dtsi"

        spi2: spi@b0258000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-spi";
                reg = <0xb0258000 0x4000>;
                interrupts = <0x0 0x15 0x4>;
                status = "disabled";
        };

        spi3: spi@b025c000 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "actions,atm7029-spi";
                reg = <0xb02c5000 0x4000>;
                interrupts = <0x0 0x16 0x4>;
                status = "disabled";
        };

        atm7029-gpio: gpio@b01b0000 {
                compatible = "actions,atm7029-gpio";
                reg = <0xb01b0000 0x40>;
                interrupts = <0x0 0x24 0x4 0x0 0x25 0x4 0x0 0x26 0x4 0x0 0x27 0x4 0x0 0x28 0x4>;
                #gpio-cells = <2>;
                gpio-controller;
                #interrupt-cells = <2>;
                interrupt-controller;
                status = "okay";
        };

        atm7029-pwm: pwm@b01b0050 {
                compatible = "actions,atm7029-pwm";
                reg = <0xb01b0050 0x10>;
                #pwm-cells = <3>;

                pwm0 {
                        id = <0>;
                        pinctrl-names = "default";
                        pinctrl-0 = <0x11>;
                };

                pwm1 {
                        id = <1>;
                        pinctrl-names = "default";
                        pinctrl-0 = <0x12>;
                };

                pwm2 {
                        id = <2>;
                        pinctrl-names = "default";
                        pinctrl-0 = <0x13>;
                };

                pwm3 {
                        id = <3>;
                        pinctrl-names = "default";
                        pinctrl-0 = <0x14>;
                };
        };
